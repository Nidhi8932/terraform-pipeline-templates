parameters:
terraformVersion: '1.5.7'
workingDirectory: ''
serviceConnection: ''
backendResourceGroup: ''
backendStorageAccount: ''
backendContainer: ''
backendKey: ''


steps:
- task: TerraformInstaller@1
displayName: Install Terraform
inputs:
terraformVersion: ${{ parameters.terraformVersion }}


- task: TerraformTaskV4@4
displayName: Terraform Init
inputs:
provider: 'azurerm'
command: 'init'
workingDirectory: ${{ parameters.workingDirectory }}
backendServiceArm: ${{ parameters.serviceConnection }}
backendAzureRmResourceGroupName: ${{ parameters.backendResourceGroup }}
backendAzureRmStorageAccountName: ${{ parameters.backendStorageAccount }}
backendAzureRmContainerName: ${{ parameters.backendContainer }}
backendAzureRmKey: ${{ parameters.backendKey }}