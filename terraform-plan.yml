parameters:
  workingDirectory: ''
  serviceConnection: ''

steps:
- task: AzureCLI@2
  displayName: Terraform Plan
  inputs:
    azureSubscription: ${{ parameters.serviceConnection }}
    scriptType: bash
    scriptLocation: inlineScript
    inlineScript: |
      set -e
      cd ${{ parameters.workingDirectory }}
      terraform plan -var-file=var.tfvars -out=tfplan -input=false
