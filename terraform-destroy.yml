parameters:
workingDirectory: ''
serviceConnection: ''


steps:
- task: TerraformTaskV4@4
displayName: Terraform Destroy
condition: and(succeeded(), eq(variables['RunDestroy'], 'true'))
inputs:
provider: 'azurerm'
command: 'destroy'
workingDirectory: ${{ parameters.workingDirectory }}
environmentServiceNameAzureRM: ${{ parameters.serviceConnection }}
commandOptions: '-auto-approve'